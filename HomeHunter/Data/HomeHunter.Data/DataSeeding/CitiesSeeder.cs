using HomeHunter.Domain;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;

namespace HomeHunter.Data.DataSeeding
{
    public class CitiesSeeder : ISeeder
    {
        private readonly string[] Cities = new string[]
        {
            "София",
            "Банкя",
            "Ботевград",
            "Вършец",
            "Елин Пелин",
            "Костинброд",
            "Нови Искър",
            "Перник",
            "Самоков",
            "Радомир",
            "Сливница",
            "Айтос",
            "Аксаково",
            "Алфатар",
            "Антоново",
            "Априлци",
            "Ардино",
            "Асеновград",
            "Ахелой",
            "Ахтопол",
            "Балчик",     
            "Банско",
            "Баня",
            "Батак",
            "Батановци",
            "Белене",
            "Белица",
            "Белово",
            "Белоградчик",
            "Белослав",
            "Берковица",
            "Благоевград",
            "Бобов дол",
            "Бобошево",
            "Божурище",
            "Бойчиновци",
            "Болярово",
            "Борово",
            "Брацигово",
            "Брегово",
            "Брезник",
            "Брезово",
            "Брусарци",
            "Бургас",
            "Бухово",
            "Българово",
            "Бяла(Варна)",
            "Бяла(Русе)",
            "Бяла Слатина",
            "Бяла Черква",
            "Варна",
            "Велики Преслав",
            "Велико Търново",
            "Велинград",
            "Ветово",
            "Ветрен",
            "Видин",
            "Враца",
            "Вълчедръм",
            "Вълчи дол",
            "Върбица",
            "Габрово",
            "Генерал Тошево",
            "Главиница",
            "Глоджево",
            "Годеч",
            "Горна Оряховица",
            "Гоце Делчев",
            "Грамада",
            "Гулянци",
            "Гурково",
            "Гълъбово",
            "Две могили",
            "Дебелец",
            "Девин",
            "Девня",
            "Джебел",
            "Димитровград",
            "Димово",
            "Добринище",
            "Добрич",
            "Долна баня",
            "Долна Митрополия",
            "Долна Оряховица",
            "Долни Дъбник",
            "Долни чифлик",
            "Доспат",
            "Драгоман",
            "Дряново",
            "Дулово",
            "Дунавци",
            "Дупница",
            "Дългопол",
            "Елена",
            "Елхово",
            "Етрополе",
            "Завет",
            "Земен",
            "Златарица",
            "Златица",
            "Златоград",
            "Ивайловград",
            "Игнатиево",
            "Искър",
            "Исперих",
            "Ихтиман",
            "Каблешково",
            "Каварна",
            "Казанлък",
            "Калофер",
            "Камено",
            "Каолиново",
            "Карлово",
            "Карнобат",
            "Каспичан",
            "Килифарево",
            "Китен",
            "Клисура",
            "Кнежа",
            "Козлодуй",
            "Копривщица",
            "Костенец",
            "Котел",
            "Кочериново",
            "Кресна",
            "Криводол",
            "Кричим",
            "Крумовград",
            "Кубрат",
            "Куклен",
            "Кула",
            "Кърджали",
            "Кюстендил",
            "Левски",
            "Ловеч",
            "Лом",
            "Луковит",
            "Лъки",
            "Любимец",
            "Лясковец",
            "Мадан",
            "Маджарово",
            "Малко Търново",
            "Мездра",
            "Мелник",
            "Мизия",
            "Момин проход",
            "Момчилград",
            "Монтана",
            "Мъглиж",
            "Неделино",
            "Несебър",
            "Николаево",
            "Никопол",
            "Нова Загора",
            "Нови пазар",
            "Обзор",
            "Омуртаг",
            "Оряхово",
            "Павел баня",
            "Павликени",
            "Пазарджик",
            "Панагюрище",
            "Перущица",
            "Петрич",
            "Пещера",
            "Пирдоп",
            "Плачковци",
            "Плевен",
            "Плиска",
            "Пловдив",
            "Полски Тръмбеш",
            "Поморие",
            "Попово",
            "Правец",
            "Приморско",
            "Провадия",
            "Първомай",
            "Раднево",
            "Разград",
            "Разлог",
            "Ракитово",
            "Раковски",
            "Рила",
            "Роман",
            "Рудозем",
            "Русе",
            "Садово",
            "Сандански",
            "Сапарева баня",
            "Свети Влас",
            "Свиленград",
            "Свищов",
            "Своге",
            "Севлиево",
            "Септември",
            "Силистра",
            "Симеоновград",
            "Симитли",
            "Славяново",
            "Сливен",
            "Смолян",
            "Смядово",
            "Созопол",
            "Сопот",
            "Средец",
            "Стамболийски",
            "Стара Загора",
            "Стражица",
            "Стралджа",
            "Стрелча",
            "Суворово",
            "Сунгурларе",
            "Сухиндол",
            "Съединение",
            "Сърница",
            "Твърдица",
            "Тервел",
            "Тетевен",
            "Тополовград",
            "Троян",
            "Трън",
            "Трявна",
            "Тутракан",
            "Търговище",
            "Угърчин",
            "Хаджидимово",
            "Харманли",
            "Хасково",
            "Хисаря",
            "Цар Калоян",
            "Царево",
            "Чепеларе",
            "Червен бряг",
            "Черноморец",
            "Чипровци",
            "Чирпан",
            "Шабла",
            "Шивачево",
            "Шипка",
            "Шумен",
            "Ябланица",
            "Якоруда",
            "Ямбол",
        };

        public async Task SeedAsync(HomeHunterDbContext dbContext, IServiceProvider serviceProvider)
        {
            await SeedCitiesAsync(Cities, dbContext);
        }

        private static async Task SeedCitiesAsync(string[] cities, HomeHunterDbContext dbContext)
        {
            var citiesFromDb = dbContext.Cities.ToList();

            var createdCities = new List<City>();
            foreach (var name in cities)
            {
                if (!citiesFromDb.Any(x => x.Name == name))
                {
                    createdCities.Add(new City
                    {
                        Name = name,
                        CreatedOn = DateTime.UtcNow,
                    });
                }
            }
            await dbContext.Cities.AddRangeAsync(createdCities);
            await dbContext.SaveChangesAsync();
        }
    }
}
